%------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%------------------------------------------------------------------------------

%\RequirePackage[l2tabu, orthodox, abort]{nag}
\documentclass[11pt, a4paper, openright, twoside]{memoir}
\chapterstyle{southall}
\checkandfixthelayout[nearest] % WHAT DOES THIS DO?

% Essentials
\usepackage[utf8]{inputenc} % UTF8-support
\usepackage[english]{babel} % Use english conventions in typesetting
\usepackage{fixltx2e} % Fixes some LaTeX stuff
\usepackage{graphicx, float} % Allows for graphics with fixed placement
\usepackage{booktabs} % Better tables
\usepackage{mathtools, amsmath, amsfonts, amssymb, amsthm} % Math-support

% Fonts
\usepackage{lmodern, tgpagella, eulervm}
\usepackage[T1]{fontenc}

% Customizable
\usepackage{morewrites}
\usepackage{csquotes}
\usepackage[style=numeric-comp]{biblatex}
\usepackage{subcaption}
\usepackage[dvipsnames]{xcolor}  % Coloured text etc.
\usepackage{tikz, tikzscale}
\usepackage{xifthen}
\usepackage{xargs}
\usepackage[colorinlistoftodos,prependcaption,textsize=footnotesize,%
obeyFinal,bordercolor=black,linecolor=black]{todonotes}
\usepackage[final]{pdfpages} % include pdfs
\usepackage{microtype}
\usepackage[bookmarks]{hyperref} % hyperlinks
\usepackage[nomain,acronym,xindy,toc,nonumberlist]{glossaries}
\usepackage{enumitem}
\usepackage{minted}
\usepackage[linesnumbered,noend,noline,boxed]{algorithm2e}
\usepackage[font={small,it},margin=.5cm]{caption}
\usepackage{etoolbox}
\usepackage{colortbl}
\usepackage{hhline}
% Keep here to make sure it loads last (but it is a "Essentials")
\usepackage[noabbrev,capitalize]{cleveref}
\usepackage{autonum}

\AtBeginEnvironment{algorithm}{\captionsetup{margin={-.5cm,.5cm}}}
\SetAlCapSkip{1.5ex}
\renewcommand\AlCapNameSty{\small\textit}
\renewcommand\AlCapSty{\small\textit}

% Tikz styles
\tikzset{%
stein/.style 2 args={circle,inner sep=1pt,fill=white,draw,minimum size=5pt,label={#2:#1}},%
reg/.style 2 args={circle,inner sep=1pt,fill=black,minimum size=8pt,label={#2:#1}}%
}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

% To-do commands
\newcommandx{\NOTE}[2][1=]{%
\todo[backgroundcolor=green!50,#1]{Note: #2}}

\newcommandx{\TODO}[2][1=]{%
\todo[backgroundcolor=yellow!50,#1]{ToDo: #2}}

\newcommandx{\FIXME}[2][1=]{%
\todo[backgroundcolor=red!50,#1]{FixMe: #2}}

\newcommandx{\missingref}[2][1=]{%
\todo[backgroundcolor=blue!50,#1]{Missing ref: #2}}

% Theorems, lemmas and corollaries
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}{Definition}[chapter]

% Hyperref setup
\hypersetup{
  bookmarks=true,
  colorlinks=true, % colored links
  linkcolor=red, % color of internal links
  citecolor=NavyBlue, % color of links to bibliography
  filecolor=cyan, % color of file links
  urlcolor=blue % color of external links
}

% Acronym setup
\renewcommand*{\glstextformat}[1]{\textcolor{black}{#1}}
\renewcommand*{\glsclearpage}{}
\makeglossaries{}
\input{content/frontmatter/glossaries}

% Remove indent and use a line-skip instead
\nonzeroparskip{}
\setlength{\parindent}{0pt}

\newcommand{\chapterbreak}[0]{\par\fancybreak{$***$}\par}

\definecolor{bg}{rgb}{0.85,0.85,0.95}
\newminted[c-code]{c}{%
  bgcolor=bg,%
  fontsize=\footnotesize,%
  baselinestretch=0.8%
}

\usetikzlibrary{tikzmark, arrows.meta}

\makeatletter
\renewcommand*{\thelisting}{\thechapter.\arabic{listing}}
\@addtoreset{listing}{chapter}
\makeatother

% Bibliographies
\addbibresource{content/backmatter/bibliography.bib}

%------------------------------------------------------------------------------
%	BEGIN DOCUMENT
%------------------------------------------------------------------------------

\pagestyle{ruled}

\begin{document}

%------------------------------------------------------------------------------
%	PRE-CONTENT - THESIS PAGES
%------------------------------------------------------------------------------

\frontmatter

\includepdf{coverpage/coverpage}

\pagenumbering{roman} % Roman page numbering prior to the start of the thesis content (i, ii, iii, etc)

\include{content/frontmatter/abstract}

{
\hypersetup{
  colorlinks=true, % colored links
  linkcolor=MidnightBlue, % color of internal links
}
\abnormalparskip{0pt}
\listoftodos
\clearpage
\tableofcontents
\listoftables
\listoffigures
\listoflistings
% \openany
\printglossary[type=\acronymtype,title=Abbreviations]
%\openright
}

%------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%------------------------------------------------------------------------------

\mainmatter

\pagenumbering{arabic} % Arabic page numbering for thesis content (1, 2, 3, etc)

\include{content/mainmatter/introduction}
\include{content/mainmatter/preliminaries}
\include{content/mainmatter/smiths-algorithm}
\include{content/mainmatter/implementation}
\include{content/mainmatter/experiments}
\include{content/mainmatter/discussion}
\include{content/mainmatter/conclusion}

%------------------------------------------------------------------------------
%	POST-CONTENT  - APPENDIX AND BIBLIOGRAPHY
%------------------------------------------------------------------------------

\backmatter

\appendix

\label{app:bibliography}
\printbibheading
\printbibliography

% \include{content/backmatter/sourcecode}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
