%------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%------------------------------------------------------------------------------

\RequirePackage[l2tabu, orthodox, abort]{nag}
\documentclass[11pt, a4paper, openright, twoside]{memoir}
\chapterstyle{southall}
\checkandfixthelayout[nearest]

% Essentials
\usepackage[utf8]{inputenc} % UTF8-support
\usepackage[english]{babel} % Use english conventions in typesetting
\usepackage{fixltx2e} % Fixes some LaTeX stuff
\usepackage{graphicx, float} % Allows for graphics with fixed placement
\usepackage{booktabs} % Better tables
\usepackage{mathtools, amsmath, amsfonts, amssymb, amsthm} % Math-support

% Fonts
\usepackage{lmodern, tgpagella, eulervm}
\usepackage[T1]{fontenc}

% Customizable
\usepackage{morewrites}
\usepackage{csquotes}
\usepackage[style=numeric-comp]{biblatex}
\usepackage{subcaption}
\usepackage[dvipsnames]{xcolor}
\usepackage{tikz, tikzscale}
\usepackage{xifthen}
\usepackage{xargs}
\usepackage[colorinlistoftodos,prependcaption,textsize=footnotesize,%
obeyFinal,bordercolor=black,linecolor=black]{todonotes}
\usepackage[final]{pdfpages}
\usepackage{microtype}
\usepackage[bookmarks]{hyperref}
% \usepackage[nomain,acronym,xindy,toc,nonumberlist]{glossaries}
\usepackage{acronym}
\usepackage{enumitem}
\usepackage{minted}
\usepackage[linesnumbered,noend,noline,boxed]{algorithm2e}
\usepackage[font={small,it},margin=.5cm]{caption}
\usepackage{etoolbox}
\usepackage{colortbl}
\usepackage{afterpage}
\usepackage{hhline}
\usepackage[noabbrev,capitalize]{cleveref}
\usepackage{autonum}

% algorithm2e setup
\AtBeginEnvironment{algorithm}{\captionsetup{margin={-.5cm,.5cm}}}
\SetAlCapSkip{1.5ex}
\renewcommand\AlCapNameSty{\small\textit}
\renewcommand\AlCapSty{\small\textit}

% tikz setup
\usetikzlibrary{tikzmark, arrows.meta}
\tikzset{%
stein/.style 2 args={circle,inner sep=1pt,fill=white,draw,minimum size=5pt,label={#2:#1}},%
reg/.style 2 args={circle,inner sep=1pt,fill=black,minimum size=8pt,label={#2:#1}}%
}
\pgfdeclarelayer{background}
\pgfdeclarelayer{foreground}
\pgfsetlayers{background,main,foreground}

% todonotes setup
\newcommandx{\NOTE}[2][1=]{\todo[backgroundcolor=green!50,#1]{Note: #2}}
\newcommandx{\TODO}[2][1=]{\todo[backgroundcolor=yellow!50,#1]{ToDo: #2}}
\newcommandx{\FIXME}[2][1=]{\todo[backgroundcolor=red!50,#1]{FixMe: #2}}
\newcommandx{\missingref}[2][1=]{\todo[backgroundcolor=blue!50,#1]{Missing ref: #2}}

% Hyperref setup
\hypersetup{
  bookmarks=true,
  colorlinks=true, % colored links
  linkcolor=MidnightBlue, % color of internal links
  citecolor=MidnightBlue, % color of links to bibliography
  filecolor=cyan, % color of file links
  urlcolor=blue % color of external links
}

% Acronym setup
\makeatletter
\AtBeginDocument{%
  \renewcommand*{\AC@hyperlink}[2]{%
    \begingroup
      \hypersetup{hidelinks}%
      \hyperlink{#1}{#2}%
    \endgroup
  }%
}
\makeatother

% minted setup
\definecolor{bg}{rgb}{0.85,0.85,0.95}
\newminted[c-code]{c}{%
  bgcolor=bg,%
  fontsize=\footnotesize,%
  baselinestretch=0.8%
}

\makeatletter
\renewcommand*{\thelisting}{\thechapter.\arabic{listing}}
\@addtoreset{listing}{chapter}
\makeatother

\renewcommand{\listoflistings}{%
  \cleardoublepage%
  \addcontentsline{toc}{chapter}{\listoflistingscaption}%
  \listof{listing}{\listoflistingscaption}%
}

% Remove indent and use a line-skip instead
\nonzeroparskip{}
\setlength{\parindent}{0pt}

% Theorems, lemmas and corollaries
\newtheorem{theorem}{Theorem}[chapter]
\newtheorem{corollary}{Corollary}[theorem]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{definition}{Definition}[chapter]

% Misc commands
\newcommand{\chapterbreak}[0]{\par\fancybreak{$***$}\par}

% Bibliographies
\addbibresource{content/backmatter/bibliography.bib}

%------------------------------------------------------------------------------
%	BEGIN DOCUMENT
%------------------------------------------------------------------------------

\pagestyle{ruled}

\begin{document}

%------------------------------------------------------------------------------
%	PRE-CONTENT - THESIS PAGES
%------------------------------------------------------------------------------

\frontmatter

\includepdf{coverpage/coverpage}

\pagenumbering{roman} % Roman page numbering prior to the start of the thesis content (i, ii, iii, etc)

\include{content/frontmatter/abstract}

{
\openany
\listoftodos%
\clearpage
\tableofcontents
\let\clearpage\relax
\listoftables
\listoffigures
\listoflistings%
\input{content/frontmatter/glossaries}
\openright
}

%------------------------------------------------------------------------------
%	THESIS CONTENT - CHAPTERS
%------------------------------------------------------------------------------

\mainmatter%

\pagenumbering{arabic} % Arabic page numbering for thesis content (1, 2, 3, etc)

\include{content/mainmatter/introduction}
\include{content/mainmatter/preliminaries}
\include{content/mainmatter/smiths-algorithm}
\include{content/mainmatter/implementation}
\include{content/mainmatter/experiments}
\include{content/mainmatter/discussion}
\include{content/mainmatter/conclusion}

\appendix
\include{content/backmatter/sourcecode}

%------------------------------------------------------------------------------
%	POST-CONTENT  - APPENDIX AND BIBLIOGRAPHY
%------------------------------------------------------------------------------

\backmatter%

\printbibliography%

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
